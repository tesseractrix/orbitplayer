<!DOCTYPE html>
<html lang="en">

<head>
<title> Orbit Player </title>
<link rel="icon" href="img/orbit_icon.png">
<link rel="stylesheet" href="styles.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

  <header>
    <p><a href="start.html"><img src="img/orbit_white.png" width="180" height="64" title="Orbit Player" ></a></p>
	
	<button onclick="toggleDarkMode()">Switch Theme</button>

  </header>

  <main>
    <article>

 <p align="center">
  <audio id="audioPlayer" controls onended="playRandom()">
    <source id="audioSource" src="" type="audio/mp3">
    Seu navegador não suporta a tag de áudio.
  </audio>
</p>

<p>
<input type="text" id="search" onkeyup="search()" placeholder="Search..." width="300" height="40">

<button onclick="skipSong()">Skip</button>
</p>

<ul id="results"></ul>

<script> // lightmode script
function toggleDarkMode() {
const body = document.body;
body.classList.toggle('light-mode');
}
</script>
	
<script> // anti right-click protection
	document.addEventListener('contextmenu', function (e) {
	e.preventDefault();
});
</script>

<script>
  var data = [
    { title: "Cigarettes After Sex - Apocalypse", url: "music/Cigarettes After Sex - Apocalypse.mp3" },
    { title: "Sam Smith - Fire on fire", url: "music/Sam Smith - Fire on fire.mp3" },
  {title: "3030 - Fé", url: "music/3030 - Fé.mp3"},
  {title: "Rodrigo Alarcon - Apesar de querer", url: "music/Rodrigo Alarcon - Apesar de querer.mp3"},
  {title: "Xamã - Uma linda mulher", url: "music/Xamã - Uma linda mulher.mp3"},
  {title: "Cigarettes After Sex - Touch", url: "music/Cigarettes After Sex - Touch.mp3"},
  {title: "Stephen Sanchez - Until i found you", url: "music/Stephen Sanchez - Until i found you.mp3"},
  {title: "New West - Those Eyes", url: "music/New West - Those Eyes.mp3"},
  {title: "Cigarettes After Sex - Crush", url: "music/Cigarettes After Sex - Crush.mp3"},
  {title: "3030 - Lunar", url: "music/3030 - Lunar.mp3"},
  {title: "Cigarettes After Sex - K", url: "music/Cigarettes After Sex - K.mp3"},
  {title: "Cigarettes After Sex - Keep On Loving You", url: "music/Cigarettes After Sex - Keep On Loving You.mp3"},
  {title: "Jão - Alinhamento Milenar", url: "music/Jão - Alinhamento Milenar.mp3"},
  {title: "Sleeping At Last - Saturn", url: "music/Sleeping At Last - Saturn.mp3"},
  {title: "Pagan John - Meu Cais", url: "music/Pagan John - Meu Cais.mp3"},
  {title: "Pagan John - Inesperado", url: "music/Pagan John - Inesperado.mp3"},
  {title: "Torus - Dança Sincrônica", url: "music/Torus - Dança Sincrônica.mp3"},
  {title: "Agnes Nunes - 100 por hora", url: "music/Agnes Nunes - 100 por hora.mp3"},
  {title: "Jão - Imaturo", url: "music/Jão - Imaturo.mp3"},
  {title: "Samantha Machado - Livre Pra Voar", url: "music/Samantha Machado - Livre Pra Voar.mp3"},
  {title: "Coldplay - A Sky Full Of Stars", url: "music/Coldplay - A Sky Full Of Stars.mp3"},
  {title: "Luisa Sonza - Iguaria", url: "music/Luisa Sonza - Iguaria.mp3"},
  {title: "Filipe Ret - Livre e Triste", url: "music/Filipe Ret - Livre e Triste.mp3"}
    ];

  var ul = document.getElementById("results");

  for (var i = 0; i < data.length; i++) {
    var li = document.createElement("li");
    var a = document.createElement("a");
    a.href = "#"; // Defina o href para # para evitar que o link abra uma nova página
    a.onclick = function (index) {
      return function () {
        changeAudioSource(index);
      };
    }(i);
    a.textContent = data[i].title;
    li.appendChild(a);
    ul.appendChild(li);
    li.style.display = "none";
  }

  function changeAudioSource(index) {
    var audio = document.getElementById('audioPlayer');
    var source = document.getElementById('audioSource');

    source.src = data[index].url;
    audio.load();
    audio.play();
  }

  function search() {
    var input = document.getElementById("search");
    var filter = input.value.toUpperCase();
    var ul = document.getElementById("results");
    var li = ul.getElementsByTagName("li");

    for (var i = 0; i < li.length; i++) {
      var a = li[i].getElementsByTagName("a")[0];
      var txtValue = a.textContent || a.innerText;

      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        li[i].style.display = "";
      } else {
        li[i].style.display = "none";
      }
    }

    if (filter.length == 0) {
      ul.style.display = "none";
    } else {
      ul.style.display = "block";
    }
  }

  // Script de reprodução aleatória
  var audioPlayer = document.getElementById('audioPlayer');
  var audioSource = document.getElementById('audioSource');

  function getRandomTrack() {
    var randomIndex = Math.floor(Math.random() * data.length);
    return data[randomIndex];
  }

  function playRandom() {
    var randomTrack = getRandomTrack();
    audioSource.src = randomTrack.url; // Correção: use randomTrack.url para obter o URL da música
    audioPlayer.load();
    audioPlayer.play();
  }
  
  function skipSong() {
	playRandom();
  }

  // Inicie a reprodução com a primeira música aleatória
  playRandom();
</script>

<article>

</article>

    <aside>
    </aside>
  </main>

  <footer>
  	<p>
	<a href="meditation.html"> Meditation </a> • 
	<a href="news.html"> Updates </a>
	</p>
	
	<p> Orbit Player 1.2 © 2024 </p>
  </footer>

</body>
</html>
