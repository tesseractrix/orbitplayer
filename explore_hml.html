<!DOCTYPE html>
<html lang="en">
<head>
    <title>Orbit Player - Explore</title>
    <link rel="icon" href="img/orbit_ico_blue.png">
    <link rel="stylesheet" href="css/styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<style>
    /* Estilize o retângulo */
    .image-container {
        display: flex;
        overflow-x: auto; /* Barra de rolagem horizontal */
        width: 100%;
    }

    .image {
        flex-shrink: 0;
        transition: transform 0.3s ease;
        margin: 5px;
        width: 60px;
        height: 60px;
        filter: grayscale(100%);
        opacity: 0; /* Inicialmente escondidas para "lazy loading" */
    }

    .image.lazy-loaded {
        opacity: 1;
        transition: opacity 0.5s ease-in;
    }

    .image:hover {
        transform: scale(1.1);
        filter: grayscale(0%);
    }
</style>

<header>
    <p><a href="start.html"><img src="img/orbit_white.png" width="140" height="50" title="Orbit Player"></a></p>
    <p>
        <a href="index.html"> Home </a> • 
        <a href="news.html"> Updates </a>
    </p>
    <button id="fixedButton" onclick="toggleDarkMode()">Switch Theme</button>
</header>

<main>
    <article>
        <p align="center">Playlists</p>
        <div class="image-container" id="imageContainer">
            <!-- Botões de rolagem -->
            <button class="start" onclick="scrollToStart()">&#10094;</button>
            <!-- As imagens serão adicionadas dinamicamente pelo JavaScript -->
            <button class="end" onclick="scrollToEnd()">&#10095;</button>
        </div>
    </article>
</main>

<script>
// Lista de imagens
const imagesData = [
    { src: "img/call_the_boss_70.jpg", title: "Call The Boss", link: "playlist_call-the-boss.html" },
    { src: "img/high_trip_70.jpg", title: "High Trip", link: "playlist_high-trip.html" },
    { src: "img/rock_wins_70.jpg", title: "Rock Wins", link: "playlist_rock-wins.html" },
    { src: "img/rio_night_70.jpg", title: "Rio Night", link: "playlist_rio-night.html" },
    { src: "img/3030-vibes.jpg", title: "3030 Vibes", link: "playlist_3030-vibes.html" },
    { src: "img/serenitas_divinae_70.jpg", title: "Serenitas Divinae", link: "playlist_serenitas-divinae.html" },
    { src: "img/cigarettesaftersex_70.jpg", title: "Cigarettes After Sex", link: "playlist_cigarettes-after-sex.html" },
    { src: "img/bassline_euphoria.jpg", title: "Bassline Euphoria", link: "playlist_bassline-euphoria.html" },
    { src: "img/celin24h_70.jpg", title: "Celin", link: "playlist_celin.html" },
    { src: "img/old_but_gold_70.jpg", title: "Old but Gold", link: "playlist_old-but-gold.html" },
    { src: "img/fuego_latino_70.jpg", title: "Fuego Latino", link: "playlist_fuego-latino.html" },
    { src: "img/ambient_music_70.jpg", title: "Ambient Music", link: "playlist_ambient.html" }
];

// Função para embaralhar as imagens
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// Carrega apenas as primeiras imagens
function loadInitialImages() {
    shuffle(imagesData);
    const imageContainer = document.getElementById("imageContainer");
    imagesData.forEach((imageData, index) => {
        const a = document.createElement("a");
        a.href = imageData.link;
        const img = document.createElement("img");
        img.src = index < 4 ? imageData.src : ""; // Apenas as 4 primeiras imagens são carregadas imediatamente
        img.dataset.src = imageData.src; // Lazy load para as restantes
        img.className = "image";
        img.title = imageData.title;
        img.alt = imageData.title;
        a.appendChild(img);
        imageContainer.appendChild(a);
    });
}

// Lazy load das imagens restantes com IntersectionObserver
const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.classList.add("lazy-loaded");
            observer.unobserve(img); // Interrompe a observação após o carregamento
        }
    });
});

document.addEventListener("DOMContentLoaded", () => {
    loadInitialImages();
    const images = document.querySelectorAll(".image");
    images.forEach(img => {
        if (!img.src) observer.observe(img); // Aplica o observer às imagens ainda não carregadas
    });
});

// Função para rolagem até o início
function scrollToStart() {
    document.getElementById("imageContainer").scrollTo({ left: 0, behavior: 'smooth' });
}

// Função para rolagem até o fim
function scrollToEnd() {
    const imageContainer = document.getElementById("imageContainer");
    const maxScroll = imageContainer.scrollWidth - imageContainer.clientWidth;
    imageContainer.scrollTo({ left: maxScroll, behavior: 'smooth' });
}

// Alterna o tema da página
function toggleDarkMode() {
    document.body.classList.toggle('light-mode');
}
</script>

</body>
</html>
